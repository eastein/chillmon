<!DOCTYPE html>
<html>
  <head>
    <title>Chillmon</title>
    <style type="text/css">
      body {
        background-color: #111111;
        color: #eeeeee;
        font-family: tahoma, arial, sans-serif;
        padding-left: 100px;
      }
      h4 {
        margin-bottom: 1px;
      }
    </style>
    <script type="text/javascript" src="smoothie.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
    <script type="text/javascript">

function init() {
  var dataset = new TimeSeries();

  var now = new Date().getTime();

  // Every second, get the total trace
  setInterval(function() {
    update_dataset(dataset);
  }, 1000);

  var timeline = new SmoothieChart({ millisPerPixel: 4500, grid: { strokeStyle: '#555555', lineWidth: 1, millisPerLine: 300000, verticalSections: 4 }});

  timeline.addTimeSeries(dataset, { strokeStyle: 'rgba(255, 0, 0, 1)', fillStyle: 'rgba(255, 0, 0, 0.1)', lineWidth: 3 });

  timeline.streamTo(document.getElementById('temps'), 1000);
}

function update_dataset(dataset) {
  $.ajax({
    url: '/trace/all',
    dataType: 'json',
    success: function(data) {
      dataset.data = data['data'];
      dataset.resetBounds()
    }
  });
}


    </script>
  </head>
  <body onload="init()">

    <h1>Chillmon</h1>

    <h4>Temps</h4>
    <canvas id="temps" width="800" height="100"></canvas>
  </body>
</html>

